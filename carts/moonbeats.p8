pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
-- moonbeats
-- by berg bros
x=0
y=0
square = 1
face_left=true

left,right,up,down,fire1,fire2=0,1,2,3,4,5
black,dark_blue,dark_purple,dark_green,brown,dark_gray,light_gray,white,red,orange,yellow,green,blue,indigo,pink,peach=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15

color = { red, yellow, green, blue }
rects = {}

function init()
  local count = 3
  local padding = 15
  local width = 8
  local start = 127 - (((count + 1) * width) + (padding * (count)))
  for i=0,count do
    rects[i + 1] = start + ((width + padding) * i)
  end
  x = rects[1]
  y = 115
end

init()

function _update()
  character()
end

function _draw()
	cls()
	if (face_left) then
		spr(1,x,y,1,1,true)
	else
		spr(1,x,y,1,1)
  end
  drawRects()
end

function drawRects()
  local y0 = 115
  local width = 8
  local height = 8
  for i=0,(#rects - 1) do
    rect(
      rects[i + 1],
      y0,
      rects[i + 1] + width,
      y0 + height,
      color[i + 1]
    )
  end
end

function character()
  prev_x=x
  if (x > rects[1] and btnp(⬅️)) then
    square -= 1
    x=rects[square]
  end
  if (x < (rects[#rects]) and btnp(➡️)) then
    square += 1
    x=rects[square]
	end
	if (prev_x != x) then
		face_left = prev_x < x
	end
	if (btn(❎)) then
		music(0)
	end
end
__gfx__
0000000000aaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000a0077a0000000000000000000022222222c000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700a000007a00000000000000000022eeeeeee2c00000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000a0c0c00a0000000000000000022eeeeeeeee220000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000a000000a000000000000000002eee77e77eee20000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700a090900a000000000000000002eee07e07eee20000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000a9990aa000000000000000002eeceeeeecee20000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000aaaaa0000000000000000002ecfeeeeefce20000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000002eeee888eeee20000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000ceee222eeec00000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000eeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000c0000eee0000c0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000888eee888000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000e22222288888e88888222222e0000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000e22222888888888788822222e0000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000888888888887888000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000888888888888788000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000888888888888888000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000888888888888888000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000088888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000008888888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000888888888000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000088888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000008888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000002888200000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000002000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000292000292000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000222000222000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
01140000041430000000000000002465200602186031a603041431860300000000002465200000000000000004143000000000000000246520000000000000000414300000000000000024652000000000000000
000d0000235502255022750217501f7501d5501b550197501775013550115500f7500e7500b55009750097500b5500d5501075011750135501455016750197501b5501c5501e7501e75020750215502255022750
01140000000000000000000000000000000000000000000000000000001c155000001c155000000000000000000000000000000000000000000000000000000000000000001c155000001c155000000000000000
__music__
00 00020304

